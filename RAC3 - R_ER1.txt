enable
conf t

hostname ER1
username admin privilege 15 secret admin

line con 0
login local

line vty 0 15
login local

banner motd #Acceso a ER1. Solo a Personal Autorizado#

ip domain-name er1.as250.com
crypto key generate rsa general-keys modulus 1024

ipv6 unicast-routing

inter loopback 0
desc ER1LOOPBACK
ip address 20.0.0.251 255.255.255.255
ipv6 address 2001:DB8:250:1000::101/128
no shut

inter g0/0.30
encapsulation dot1q 30
desc WAN ISP1 50.0.0.12/30
ip address 50.0.0.14 255.255.255.252
ipv6 address 2001:DB8:250:C003::14/64
no shut

inter g0/0.35
encapsulation dot1q 35
desc WAN ISP2 60.0.0.4/30
ip address 60.0.0.6 255.255.255.252
ipv6 address 2001:DB8:250:C001::6/64
no shut

inter g0/0.50
encapsulation dot1q 50
desc WAN C2 10.0.1.8/30
ip address 10.0.1.9 255.255.255.252
ipv6 address 2001:DB8:250:3000::9/64
no shut

inter g0/0.60
encapsulation dot1q 60
desc WAN C1 10.0.1.0/30
ip address 10.0.1.1 255.255.255.252
ipv6 address 2001:DB8:250:2000::1/64
no shut

inter g0/0
no shut

router ospf 1
router-id 20.0.0.251
network 10.0.1.0 0.0.0.3 area 0
network 10.0.1.8 0.0.0.3 area 0
network 20.0.0.251 0.0.0.0 area 0

ipv6 router ospf 1
router-id 20.0.0.251

inter g0/0.50
ipv6 ospf 1 area 0

inter g0/0.60
ipv6 ospf 1 area 0

inter loopback 0
ipv6 ospf 1 area 0

router bgp 250
bgp router-id 20.0.0.251
bgp log-neighbor-changes

neighbor 20.0.0.241 remote-as 250
neighbor 20.0.0.241 update-source Loopback0


neighbor 20.0.0.242 remote-as 250
neighbor 20.0.0.242 update-source Loopback0


neighbor 20.0.0.231 remote-as 250
neighbor 20.0.0.231 update-source Loopback0


neighbor 20.0.0.232 remote-as 250
neighbor 20.0.0.232 update-source Loopback0


neighbor 20.0.0.252 remote-as 250
neighbor 20.0.0.252 update-source Loopback0


neighbor 50.0.0.13 remote-as 101
neighbor 50.0.0.13 ebgp-multihop 20


neighbor 60.0.0.5 remote-as 102
neighbor 60.0.0.5 ebgp-multihop 20


neighbor 2001:DB8:250:1000::102 remote-as 250
neighbor 2001:DB8:250:1000::102 update-source Loopback0


neighbor 2001:DB8:250:1000::C1 remote-as 250
neighbor 2001:DB8:250:1000::C1 update-source Loopback0


neighbor 2001:DB8:250:1000::C2 remote-as 250
neighbor 2001:DB8:250:1000::C2 update-source Loopback0


neighbor 2001:DB8:250:1000::111 remote-as 250
neighbor 2001:DB8:250:1000::111 update-source Loopback0


neighbor 2001:DB8:250:1000::112 remote-as 250
neighbor 2001:DB8:250:1000::112 update-source Loopback0


neighbor 2001:DB8:250:C003::13 remote-as 101
neighbor 2001:DB8:250:C003::13 ebgp-multihop 20


neighbor 2001:DB8:250:C001::5 remote-as 102
neighbor 2001:DB8:250:C001::5 ebgp-multihop 20


address-family ipv4
neighbor 20.0.0.241 activate
neighbor 20.0.0.241 next-hop-self
neighbor 20.0.0.242 activate
neighbor 20.0.0.242 next-hop-self
neighbor 20.0.0.231 activate
neighbor 20.0.0.231 next-hop-self
neighbor 20.0.0.232 activate
neighbor 20.0.0.232 next-hop-self
neighbor 20.0.0.252 activate
neighbor 20.0.0.252 next-hop-self
neighbor 50.0.0.13 activate
neighbor 50.0.0.13 next-hop-self
neighbor 60.0.0.5 activate
neighbor 60.0.0.5 next-hop-self

network 20.0.0.251 mask 255.255.255.255
network 10.0.1.0 mask 255.255.255.252
network 10.0.1.8 mask 255.255.255.252
network 50.0.0.12 mask 255.255.255.252
network 60.0.0.4 mask 255.255.255.252

exit-address-family

address-family ipv6
neighbor 2001:DB8:250:1000::102 activate
neighbor 2001:DB8:250:1000::102 next-hop-self
neighbor 2001:DB8:250:1000::C1 activate
neighbor 2001:DB8:250:1000::C1 next-hop-self
neighbor 2001:DB8:250:1000::C2 activate
neighbor 2001:DB8:250:1000::C2 next-hop-self
neighbor 2001:DB8:250:1000::111 activate
neighbor 2001:DB8:250:1000::111 next-hop-self
neighbor 2001:DB8:250:1000::112 activate
neighbor 2001:DB8:250:1000::112 next-hop-self
neighbor 2001:DB8:250:C003::13 activate
neighbor 2001:DB8:250:C003::13 next-hop-self
neighbor 2001:DB8:250:C001::5 activate
neighbor 2001:DB8:250:C001::5 next-hop-self

network 2001:DB8:250:1000::101/128
network 2001:DB8:250:2000::/64
network 2001:DB8:250:3000::/64
network 2001:DB8:250:C003::/64
network 2001:DB8:250:C001::/64

exit-address-family

end
write memory
