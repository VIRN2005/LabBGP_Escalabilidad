enable
conf t

hostname ISP1
username admin privilege 15 secret admin

line con 0
login local

line vty 0 15
login local

banner motd #Acceso a ISP1. Solo a Personal Autorizado#

ip domain-name isp1.com
crypto key generate rsa general-keys modulus 1024

ipv6 unicast-routing

inter loopback 0
desc ISP1LOOPBACK
ip address 50.0.0.100 255.255.255.255
ipv6 address 2001:DB8:101:1000::100/128
no shut

inter g0/0.10
encapsulation dot1q 10
desc WAN ISP4 50.0.0.8/30
ip address 50.0.0.10 255.255.255.252
ipv6 address 2001:DB8:101:C002::2/64
no shut

inter g0/0.15
encapsulation dot1q 15
desc WAN ISP3 50.0.0.4/30
ip address 50.0.0.6 255.255.255.252
ipv6 address 2001:DB8:101:C001::2/64
no shut

inter g0/0.25
encapsulation dot1q 25
desc WAN ISP2 50.0.0.0/30
ip address 50.0.0.2 255.255.255.252
ipv6 address 2001:DB8:101:C000::2/64
no shut

inter g0/0.30
encapsulation dot1q 30
desc WAN ER1 50.0.0.12/30
ip address 50.0.0.13 255.255.255.252
ipv6 address 2001:DB8:250:C003::13/64
no shut

inter g0/0.40
encapsulation dot1q 40
desc WAN ER2 50.0.0.16/30
ip address 50.0.0.17 255.255.255.252
ipv6 address 2001:DB8:250:C004::17/64
no shut

inter g0/0
no shut

router bgp 101
bgp router-id 50.0.0.100
bgp log-neighbor-changes

neighbor 50.0.0.9 remote-as 104
neighbor 50.0.0.9 ebgp-multihop 20
neighbor 2001:DB8:101:C002::1 remote-as 104
neighbor 2001:DB8:101:C002::1 ebgp-multihop 20

neighbor 50.0.0.5 remote-as 103
neighbor 50.0.0.5 ebgp-multihop 20
neighbor 2001:DB8:101:C001::1 remote-as 103
neighbor 2001:DB8:101:C001::1 ebgp-multihop 20

neighbor 50.0.0.1 remote-as 102
neighbor 50.0.0.1 ebgp-multihop 20
neighbor 2001:DB8:101:C000::1 remote-as 102
neighbor 2001:DB8:101:C000::1 ebgp-multihop 20

neighbor 50.0.0.14 remote-as 250
neighbor 50.0.0.14 ebgp-multihop 20
neighbor 2001:DB8:250:C003::14 remote-as 250
neighbor 2001:DB8:250:C003::14 ebgp-multihop 20

neighbor 50.0.0.18 remote-as 250
neighbor 50.0.0.18 ebgp-multihop 20
neighbor 2001:DB8:250:C004::18 remote-as 250
neighbor 2001:DB8:250:C004::18 ebgp-multihop 20

address-family ipv4
neighbor 50.0.0.9 activate
neighbor 50.0.0.9 next-hop-self
neighbor 50.0.0.5 activate
neighbor 50.0.0.5 next-hop-self
neighbor 50.0.0.1 activate
neighbor 50.0.0.1 next-hop-self
neighbor 50.0.0.14 activate
neighbor 50.0.0.14 next-hop-self
neighbor 50.0.0.18 activate
neighbor 50.0.0.18 next-hop-self

network 50.0.0.100 mask 255.255.255.255
network 50.0.0.8 mask 255.255.255.252
network 50.0.0.4 mask 255.255.255.252
network 50.0.0.0 mask 255.255.255.252
network 50.0.0.12 mask 255.255.255.252
network 50.0.0.16 mask 255.255.255.252

exit-address-family

address-family ipv6
neighbor 2001:DB8:101:C002::1 activate
neighbor 2001:DB8:101:C002::1 next-hop-self
neighbor 2001:DB8:101:C001::1 activate
neighbor 2001:DB8:101:C001::1 next-hop-self
neighbor 2001:DB8:101:C000::1 activate
neighbor 2001:DB8:101:C000::1 next-hop-self
neighbor 2001:DB8:250:C003::14 activate
neighbor 2001:DB8:250:C003::14 next-hop-self
neighbor 2001:DB8:250:C004::18 activate
neighbor 2001:DB8:250:C004::18 next-hop-self

network 2001:DB8:101:C002::/64
network 2001:DB8:101:C001::/64
network 2001:DB8:101:C000::/64
network 2001:DB8:250:C003::/64
network 2001:DB8:250:C004::/64
network 2001:DB8:101:1000::100/128

exit-address-family

end
write memory